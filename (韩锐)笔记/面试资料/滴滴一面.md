滴滴一面：

1. redis使用场景有哪些？

   缓存、分布式锁、发布订阅（消息队列）、布隆过滤器、session、计数器

2. 你们redis都使用了哪些数据结构？分别在哪些业务场景用到？

   `String`：缓存或计数器

   `List`：最新的10条数据

   `Set`：被删除的物料列表

   `Sorted Set`：排名，按时间倒序存储；用户点击历史、车型按价格倒序列表

   `Hash`：映射关系，比如车型对应的论坛

3. redis缓存的过期策略有哪些？

   - （被动）当客户端访问过期key时，会被动的删除这个key。
   - （主动）redis会每隔10s随机抽查20key，删除其中过期的key，如果过期key超过25%，则重复该操作

4. redis空间不足时有哪些回收策略？

   内存淘汰算法有LRU、LFU

   策略有：不淘汰、lru（所有key）、lru（设置了过期时间的key）、随机（所有key）、随机（设置了过期时间的key）

5. MySQL表结构设计需要考虑哪些点？

   - 选择合适的存储引擎、字符集
   - 表中必须有主键，不要使用外键约束和触发器
   - 选择合适的数据类型：尽量小，保持可读，避免null（null使得索引、索引统计和值比较变得更复杂，而索引还需要额外的字节来记录null），timestamp就比datetime占用的存储空间小一半
   - 总是有创建时间、更新时间、是否删除等字段
   - 添加合适的索引

6. 创建索引需要考虑哪些点？

   索引主要是为了提升查询的性能，所以考虑的点都是围绕索引性能展开，比如：

   - 使用覆盖索引避免回表
   - 最左前缀原则避免索引失效导致索引扫描

7. 事务底层的实现原理是什么？

   首先需要了解各个日志类型：undo log用于实现事务回滚和MVCC，redo log用于实现事务持久性

   - 原子性：要么成功，要么失败，失败时使用undo log回滚
   - 一致性：数据库的完整性约束没有改变，事务执行前后是合法的状态，由数据库本身做出保障，如主外键关系等
   - 隔离性：不同事物之间互不干扰，使用锁和隔离级别（MVCC）保证隔离性
   - 持久性：事务提交应该永久性存储，redo log + 刷盘

8. redo log和binlog保证了事务的哪些特性？

   见第7题

9. redo log和bin log的区别？

   redo log用于保证crash safe，binlog记录的是数据变更日志，用于数据库恢复等

   redo log作用于引擎层，binlog作用于server层

10. 介绍一下kafka的使用场景

11. kafka用来解决什么问题？

    消息队列的特征

12. kafka的架构有了解吗？

    生产者；消费者；broker，主题，分区，副本，ISR

13. kafka数据的存储格式是什么样的？

    回答要点：存储的格式，以及为什么要这么存储（快）

14. kafka和其他消息队列的对比（rabbitmq）

15. http请求从开始到收到响应的流程都有哪些？

    - 三次握手
    - 客户端发送请求命令，如：GET /sample/hi.jsp HTTP/1.1
    - 客户端发送请求头、客户端发送空请求头、客户端发送POST请求体（如果有）
    - 服务端响应版本号和状态码：HTTP/1.1 200 OK
    - 服务端发送应答头、发送空请求头、发送Content-Type及响应数据
    - 服务器关闭TCP连接，如果Connection:keep-alive则不会关闭

16. 说说tcp协议三次握手。为什么不是2次或4次？

17. udp和tcp的区别是什么？udp的使用场景有哪些？

18. session和cookie的区别于联系是什么？

19. HashMap和Hashtable的区别？

20. java中创建线程的方式有哪些？

21. 为什么要使用线程池？

22. 线程池的参数有哪些，通过这些参数来介绍一下线程池的原理？

23. java保证线程安全的方法有哪些？

24. synchronized的内部实现原理是什么？

25. volatile的实现原理是什么？它保证了并发中的哪些问题？