### 1. MyISAM和InnoDB的区别

- MyISAM不支持事务、只支持表锁
- MyISAM不支持crash safe

### 2. 介绍一下MVCC



### 3. 为什么索引使用的是B+树结构

- 不使用二叉树的原因是因为需要写磁盘，所以树需要是矮胖的，避免过多的磁盘IO
- 

### 4. 性能优化

性能优化分成以下几个方面：

##### 2.1 连接器

连接器负责处理客户端的连接，服务端有一些资源是和连接绑定的，也就是只有连接关闭之后才会释放相关资源。所以为了避免内存占用过高导致OOM，避免长时间占用连接，应该定期释放或者重置连接相关的资源。

##### 2.2 索引优化

- 使用数据库自增id，这样新增的数据会追加到索引的最后面，否则容易导致索引页分裂和页合并
- 避免单个字段存储大量的数据，否则需要大量的索引页来存储数据，影响性能
- 使用覆盖索引，避免回表
- 最左前缀原则，提高索引的复用能力
- 避免使用唯一索引，唯一索引会导致change buffer失效，进而导致随机IO
- 避免索引扫描，索引扫描不仅影响当前查询，而且会影响内存页引起连锁反应
- 避免在查询字段上使用函数
- 使用较新版本的MySQL，新版本会做一些性能优化，避免MySQL 5.6的索引下推（在回表前过滤掉不符合的数据）
- 通过forece index(xxx)强制优化器使用指定索引
- 定期整理索引碎片，过程：先在备库上整理碎片，然后执行主备切换

##### 2.3 锁优化

- 避免使用长事务，避免使用隔离级别较高的事务
- 避免使用粒度较粗的锁
- 避免高峰时段操作表、库

##### 2.4 其他

- MySQL内会使用各种缓存优化机制避免过多的磁盘IO，比如内存页、binlog cache等，当内存不够时就会导致缓存刷盘，进而导致磁盘IO
- 使用读写分离
- 分库分表

### 5. 死锁检测